<!-- templates/channels/modals/add_channel.html -->
<div class="modal fade" id="addChannelModal" tabindex="-1" aria-labelledby="addChannelModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <form id="addChannelForm" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="modal-header bg-dark text-white">
          <h5 class="modal-title" id="addChannelModalLabel">Add New Channel</h5>
          <button type="button" class="btn-close text-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Channel Details -->
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="newChannelNameField" class="form-label">Name</label>
                <input type="text" class="form-control" id="newChannelNameField" name="channel_name" placeholder="Channel Name" required>
              </div>
              <div class="mb-3 d-flex align-items-center">
                <label for="newGroupField" class="form-label me-2">Channel Group</label>
                <select class="form-select" id="newGroupField" name="group" style="flex-grow: 1;">
                  <!-- Dynamically populated groups -->
                </select>
                <button type="button" class="btn btn-primary ms-2" data-bs-toggle="modal" data-bs-target="#addGroupModal">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
              <div class="mb-3">
                <label for="newChannelNumberField" class="form-label">Channel #</label>
                <input type="number" class="form-control" id="newChannelNumberField" name="channel_number" min="1" required>
              </div>
            </div>
            <div class="col-md-6">
              <div class="text-center mb-3">
                <label class="form-label">Logo</label>
                <div class="mb-2">
                  <img id="newLogoPreview" src="/static/default-logo.png" class="img-thumbnail" alt="Channel Logo" style="width: 100px; height: 100px;">
                </div>
                <div class="input-group">
                  <input type="file" class="form-control" id="newLogoFileField" name="logo_file">
                  <button class="btn btn-secondary" type="button" id="removeNewLogoButton">Remove</button>
                </div>
              </div>
            </div>
          </div>

          <hr class="my-4">

          <!-- Stream Management for the new channel -->
          <div class="row">
            <div class="col-md-6">
              <h6 class="text-uppercase">Active Streams</h6>
              <table id="newActiveStreamsTable" class="table table-sm table-bordered w-100">
                  <thead>
                      <tr>
                          <th>Name</th>
                          <th>M3U</th>
                          <th>Add</th>
                      </tr>
                  </thead>
                  <tbody>
                      <!-- Dynamically populated by DataTables -->
                  </tbody>
              </table>
            </div>
            <div class="col-md-6">
              <h6 class="text-uppercase">Available Streams</h6>
              <table id="newAvailableStreamsTable" class="table table-sm table-bordered w-100">
                  <thead>
                      <tr>
                          <th>Name</th>
                          <th>M3U</th>
                          <th>Actions</th>
                      </tr>
                  </thead>
                  <tbody>
                      <!-- Dynamically populated by DataTables -->
                  </tbody>
              </table>
            </div>
          </div>
        </div><!-- /.modal-body -->
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-success">Create Channel</button>
        </div>
      </form>
    </div>
  </div>
</div>
