<!-- templates/channels/modals/edit_channel.html -->
<div class="modal fade" id="editChannelModal" tabindex="-1" aria-labelledby="editChannelModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <form id="editChannelForm" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" id="editChannelIdField" name="channel_id" value="">
        <div class="modal-header bg-dark text-white">
          <h5 class="modal-title" id="editChannelModalLabel">Edit Channel</h5>
          <button type="button" class="btn-close text-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Channel Details -->
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="editChannelNameField" class="form-label">Name</label>
                <input type="text" class="form-control" id="editChannelNameField" name="channel_name" required>
              </div>
              <div class="mb-3 d-flex align-items-center">
                <label for="editGroupField" class="form-label me-2">Channel Group</label>
                <select class="form-select" id="editGroupField" name="group" style="flex-grow: 1;">
                  <!-- Dynamically populated groups -->
                </select>
                <button type="button" class="btn btn-primary ms-2" data-bs-toggle="modal" data-bs-target="#addGroupModal">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
              <div class="mb-3">
                <label for="editChannelNumberField" class="form-label">Channel #</label>
                <input type="number" class="form-control" id="editChannelNumberField" name="channel_number" min="1" required>
              </div>
            </div>
            <div class="col-md-6">
              <div class="text-center mb-3">
                <label class="form-label">Logo</label>
                <div class="mb-2">
                  <img id="editLogoPreview" src="/static/default-logo.png" class="img-thumbnail" alt="Channel Logo" style="width: 100px; height: 100px;">
                </div>
                <div class="input-group">
                  <input type="file" class="form-control" id="editLogoFileField" name="logo_file">
                  <button class="btn btn-secondary" type="button" id="removeEditLogoButton">Remove</button>
                </div>
              </div>
            </div>
          </div>

          <hr class="my-4">

          <!-- Stream Management for the channel -->
          <div class="row">
              <div class="col-md-6">
                  <h6 class="text-uppercase">Active Streams</h6>
                  <table id="editActiveStreamsTable" class="table table-sm table-bordered w-100">
                      <thead>
                          <tr>
                              <th>Name</th>
                              <th>M3U</th>
                              <th>Actions</th>
                          </tr>
                      </thead>
                      <tbody>
                          <!-- Dynamically populated by DataTables -->
                      </tbody>
                  </table>
              </div>
              <div class="col-md-6">
                  <h6 class="text-uppercase">Available Streams</h6>
                  <table id="editAvailableStreamsTable" class="table table-sm table-bordered w-100">
                      <thead>
                          <tr>
                              <th>Name</th>
                              <th>M3U</th>
                              <th>Actions</th>
                          </tr>
                      </thead>
                      <tbody>
                          <!-- Dynamically populated by DataTables -->
                      </tbody>
                  </table>
              </div>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-success">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>
