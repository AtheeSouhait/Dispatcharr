import { create } from 'zustand';
import api from '../api';
import { notifications } from '@mantine/notifications';
import API from '../api';

const useChannelsTableStore = create((set, get) => ({
  channels: [],
  count: 0,
  pageCount: 0,
  selectedChannelIds: [],

  queryChannels: ({ results, count }, params) => {
    set((state) => {
      return {
        channels: results,
        count: count,
        pageCount: Math.ceil(count / params.page_size),
      };
    });
  },

  setSelectedChannelIds: (selectedChannelIds) => {
    set({
      selectedChannelIds,
    });
  },

  getChannelStreams: (id) => {
    const channel = get().channels.find((c) => c.id === id);
    return channel?.streams ?? [];
  },
}));

export default useChannelsTableStore;
